/*** QubeFace version: 1.0.0 - Author: I. Hedrich - Licence: MIT ***/
var isQubeFaceCssAdded=!1;function QubeFace(obj){if(this.id=null,this.effect="ease-in-out",this.backgroundColor="rgba(255,255,255,.85)",this.spinDurationSeconds=null,this.actLock=!1,this.sizePx=null==this.sizePx?400:this.sizePx,this.startFace="front",this.enableEventsWhileSpinning=!1,this.disableUnpresentFaces=!1,this.stopSwipe=!1,this.stopSwipeX=!1,this.stopSwipeY=!1,this.stopSwipeRight=!1,this.stopSwipeLeft=!1,this.stopSwipeUp=!1,this.stopSwipeDown=!1,this.borderWidth=0,this.borderColor="rgba(0, 0, 0, 1.0)",this.borderStyle="solid",this.boxShadow="inset 0 0 20px rgba(0,0,0,.2)",this.textAlign="center",this.perspectivePx=800,this.perspectiveOrigin=null,this.front="",this.right="",this.back="",this.left="",this.top="",this.bottom="",this.frontBgColor="",this.rightBgColor="",this.backBgColor="",this.leftBgColor="",this.topBgColor="",this.bottomBgColor="","function"!=typeof Object.assign)for(var fld in obj)obj.hasOwnProperty(fld)&&(this[fld]=obj[fld]);else Object.assign(this,obj);var divId=this.id,spinAnimationSeconds=this.spinDurationSeconds,currentFace=this.startFace,futureIdx=0,hasBorder=!1,onSwipeUpAct="",onSwipeDownAct="",onSwipeLeftAct="",onSwipeRightAct="",afterSwipeUpAct="",afterSwipeDownAct="",afterSwipeLeftAct="",afterSwipeRightAct="",autoSpinMode=null,ap1,ap2,ap3;this.init=function(){if(null!=this.id&&""!==this.id){this.sizePx=null==this.sizePx?400:this.sizePx;var t=this.sizePx,e=t/2;null==this.perspectiveOrigin&&(this.perspectiveOrigin="50% "+e+"px"),this.spinDurationSeconds=null==this.spinDurationSeconds?.7:this.spinDurationSeconds,spinAnimationSeconds=this.spinDurationSeconds,this.actLock=!1,hasBorder=null!=this.borderWidth&&0!==this.borderWidth;var i=getRotationStyle(this.startFace,this.sizePx),s="transform:"+i+";";currentFace=this.startFace;var n=document.getElementById(this.id);if(null!=n){for(var o=""===n.className?"qube":"qube "+n.className,a=this.backgroundColor,r=[],l=[],c=0;c<6;c++){switch(c){case 0:r[c]=""==this.frontBgColor?a:this.frontBgColor;break;case 1:r[c]=""==this.backBgColor?a:this.backBgColor;break;case 2:r[c]=""==this.topBgColor?a:this.topBgColor;break;case 3:r[c]=""==this.bottomBgColor?a:this.bottomBgColor;break;case 4:r[c]=""==this.leftBgColor?a:this.leftBgColor;break;case 5:r[c]=""==this.rightBgColor?a:this.rightBgColor;break;default:r[c]=a}l[c]=r[c],r[c]=" background-color: "+r[c]+";"}var p=null==this.boxShadow||""===this.boxShadow?"":"box-shadow:"+this.boxShadow+";",u=""===this.boxShadow?null:this.boxShadow,h=hasBorder?"border:"+this.borderWidth+"px "+this.borderStyle+" "+this.borderColor+";":"",d=hasBorder?this.borderWidth+"px "+this.borderStyle+" "+this.borderColor:null,f="center"!==this.textAlign?this.textAlign:null,h=p+h+(null==f?"":"text-align:"+f+";");if(null!=n&&6===n.getElementsByClassName("qube-face").length){n.setAttribute("class",o),n.style.width=t+"px",n.style.transform="translateZ(-"+this.sizePx/2+"px)",n.style.transformOrigin="50% "+e+"px",""!==i&&(n.style.transform=i);var b=" translateZ("+e+"px)";buildSpecificFaceCase(l[0],"front",this.front,n,t,"rotateY(0deg)"+b,u,d,f),buildSpecificFaceCase(l[1],"back",this.back,n,t,"rotateY(180deg)"+b,u,d,f),buildSpecificFaceCase(l[2],"top",this.top,n,t,"rotateX(90deg)"+b,u,d,f),buildSpecificFaceCase(l[3],"bottom",this.bottom,n,t,"rotateX(-90deg)"+b,u,d,f),buildSpecificFaceCase(l[4],"left",this.left,n,t,"rotateY(-90deg)"+b,u,d,f),buildSpecificFaceCase(l[5],"right",this.right,n,t,"rotateY(90deg)"+b,u,d,f);f=n.parentNode,b=document.createElement("div");f.replaceChild(b,n),b.style.perspective=this.perspectivePx+"px",b.style.perspectiveOrigin=this.perspectiveOrigin,b.classList.add("qube-wrap-perspective"),b.appendChild(n)}else{if(null==n)return void console.error("HTML div with id '"+this.id+"' not found. ");b=n.getAttribute("style"),b='  <div id="'+this.id+'" class="'+o+'" style="width:'+t+"px; transform-origin: 50% "+e+"px;"+s+b+'">\n',h='    <div class="qube-face qube-front" style="width:'+t+"px;height:"+t+"px; transform: rotateY(0deg) translateZ("+e+"px);"+r[0]+h+'">'+this.front+'</div>\n    <div class="qube-face qube-back" style="width:'+t+"px;height:"+t+"px; transform: rotateY(180deg) translateZ("+e+"px);"+r[1]+h+'">'+this.back+'</div>\n    <div class="qube-face qube-top" style="width:'+t+"px;height:"+t+"px; transform: rotateX(90deg) translateZ("+e+"px);"+r[2]+h+'">'+this.top+'</div>\n    <div class="qube-face qube-bottom" style="width:'+t+"px;height:"+t+"px; transform: rotateX(-90deg) translateZ("+e+"px);"+r[3]+h+'">'+this.bottom+'</div>\n    <div class="qube-face qube-left" style="width:'+t+"px;height:"+t+"px; transform: rotateY(-90deg) translateZ("+e+"px);"+r[4]+h+'">'+this.left+'</div>\n    <div class="qube-face qube-right" style="width:'+t+"px;height:"+t+"px; transform: rotateY(90deg) translateZ("+e+"px);"+r[5]+h+'">'+this.right+"</div>\n",h='<div class="qube-wrap-perspective" style="perspective:'+this.perspectivePx+"px; perspective-origin:"+this.perspectiveOrigin+';">\n'+b+h+"  </div>\n</div>\n";n.outerHTML=h}this.disableUnpresentFaces&&handleUnpresentFaces(document.getElementById(this.id),currentFace)}else console.error("The QubeFace div container with the ID '"+this.id+"' doesn't exist. ")}else console.error("No QubeFace ID was found. Define the element ID of a QubeFace object to solve the problem. ")},this.onSwipe=function(t,e){var i;null==e&&(e="general"),null==t?t="":"function"==typeof t&&(t=(i=t.toString()).slice(i.indexOf("{")+1,i.lastIndexOf("}")));e=e.toLowerCase();"general"===e?onSwipeRightAct=onSwipeLeftAct=onSwipeDownAct=onSwipeUpAct=t:"vertical"===e?onSwipeDownAct=onSwipeUpAct=t:"horizontal"===e?onSwipeRightAct=onSwipeLeftAct=t:"up"===e?onSwipeUpAct=t:"down"===e?onSwipeDownAct=t:"left"===e?onSwipeLeftAct=t:"right"===e?onSwipeRightAct=t:console.error("Choose a valid swipeDirection: up/down/left/right/vertical/horizontal/general. ")},this.afterSwipe=function(t,e){var i;null==e&&(e="general"),null==t?t="":"function"==typeof t&&(t=(i=t.toString()).slice(i.indexOf("{")+1,i.lastIndexOf("}")));e=e.toLowerCase();"general"===e?afterSwipeRightAct=afterSwipeLeftAct=afterSwipeDownAct=afterSwipeUpAct=t:"vertical"===e?afterSwipeDownAct=afterSwipeUpAct=t:"horizontal"===e?afterSwipeRightAct=afterSwipeLeftAct=t:"up"===e?afterSwipeUpAct=t:"down"===e?afterSwipeDownAct=t:"left"===e?afterSwipeLeftAct=t:"right"===e?afterSwipeRightAct=t:console.error("Choose a valid swipeDirection: up/down/left/right/vertical/horizontal/general. ")};let setQubeFace=function(t,e){var i=document.getElementById(divId);null!=i?null!=(t=i.getElementsByClassName("qube-"+t))[0]&&(t[0].innerHTML=e):console.error("undefined ID")};this.setFront=function(t){this.front=t,setQubeFace("front",t)},this.setRight=function(t){this.right=t,setQubeFace("right",t)},this.setBack=function(t){this.back=t,setQubeFace("back",t)},this.setLeft=function(t){this.left=t,setQubeFace("left",t)},this.setTop=function(t){this.top=t,setQubeFace("top",t)},this.setBottom=function(t){this.bottom=t,setQubeFace("bottom",t)},this.moveToFace=function(t){var e=this,i=currentFace,s=t;if(this.actLock){futureIdx++;var n=-1;return setTimeout(function(){n===futureIdx&&(e.moveToFace(t),futureIdx=0)},1e3*this.spinDurationSeconds),void(n=futureIdx)}this.actLock=!0;var o,a,r,l=document.getElementById(this.id);null!=l&&(this.enableEventsWhileSpinning?l.style.pointerEvents="":l.style.pointerEvents="none",o=getRotationStyle(s,this.sizePx),a=o,r=!1,"left"===i&&"back"===s?(o="translateZ(-"+this.sizePx/2+"px) rotateY(180deg)",r=!0):"back"===i&&"left"===s&&(o="translateZ(-"+this.sizePx/2+"px) rotateY(-270deg)",r=!0),l.style.transition="transform "+this.spinDurationSeconds+"s",l.style.transitionTimingFunction=this.effect,l.style.transform=o,setTimeout(function(){var t=document.getElementById(e.id);currentFace=s,e.actLock=!1,t.style.pointerEvents="auto",r&&(t.style.transition="",t.style.transform=a)},1e3*this.spinDurationSeconds),this.disableUnpresentFaces&&handleUnpresentFaces(l,s))};let buildSpecificFaceCase=function(t,e,i,s,n,o,a,r,l){e=s.getElementsByClassName("qube-"+e)[0];null!=e&&(e.style.width=n+"px",e.style.height=n+"px",e.style.transform=o,null!=a&&(e.style.boxShadow=a),null!=r&&(e.style.border=r),null!=l&&(e.style.textAlign=l),e.style.backgroundColor=t,""!==i&&(e.innerHTML=i))},buildDisableFaceCase=function(t,e,i){disableFace(t.getElementsByClassName("qube-"+i)[0],e!==i)},handleUnpresentFaces=function(t,e){buildDisableFaceCase(t,e,"front"),buildDisableFaceCase(t,e,"right"),buildDisableFaceCase(t,e,"back"),buildDisableFaceCase(t,e,"left"),buildDisableFaceCase(t,e,"top"),buildDisableFaceCase(t,e,"bottom")};this.addHeadCss=function(t){var e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");e.appendChild(i),i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))},this.buildQubeCss=function(){this.addHeadCss(" .qube{ position: relative; margin: 0 auto; transform-style: preserve-3d; display: block; } .qube .qube-face{ position: absolute; text-align: center; box-shadow: inset 0 0 20px rgba(0,0,0,.2); box-sizing: border-box; }")},isQubeFaceCssAdded||(isQubeFaceCssAdded=!0,this.buildQubeCss()),this.spinToFront=function(){this.moveToFace("front")},this.spinToRight=function(){this.moveToFace("right")},this.spinToBack=function(){this.moveToFace("back")},this.spinToLeft=function(){this.moveToFace("left")},this.spinToTop=function(){this.moveToFace("top")},this.spinToBottom=function(){this.moveToFace("bottom")};let getRotationStyle=function(t,e){var i=e/2*-1,e=null;return"right"===(t=t.toLowerCase())?e="translateZ("+i+"px) rotateY(-90deg)":"back"===t?e="translateZ("+i+"px) rotateY(-180deg)":"left"===t?e="translateZ("+i+"px) rotateY(90deg)":"top"===t?e="translateZ("+i+"px) rotateX(-90deg)":"bottom"===t?e="translateZ("+i+"px) rotateX(90deg)":"front"===t&&(e="translateZ("+i+"px) rotateY(0deg)"),e};this.showFaceInstantly=function(t){var e,i;null!=t&&(null==(e=getRotationStyle(t,this.sizePx))||null!=(i=document.getElementById(this.id))&&(i.style.transition="",i.style.transform=e,currentFace=t.toLowerCase(),this.disableUnpresentFaces&&handleUnpresentFaces(i,currentFace)))},this.remove=function(){var t=document.getElementById(this.id);null!=t&&null!=t.parentElement&&(t.parentElement.outerHTML="")},this.fadeOut=function(){var t,e,i,s=document.getElementById(this.id);null!=s&&(t=s.parentElement,e=1,i=setInterval(function(){e<=.1&&(clearInterval(i),t.style.display="none"),t.style.opacity=e,t.style.filter="alpha(opacity="+100*e+")",e-=.1*e},20))},this.fadeIn=function(){var t,e,i,s=document.getElementById(this.id);null!=s&&(t=s.parentElement,e=.1,t.style.display="block",i=setInterval(function(){1<=e&&clearInterval(i),t.style.opacity=e,t.style.filter="alpha(opacity="+100*e+")",e+=.1*e},10))};let disableFace=function(t,e){if(null!=t)for(var i=t.querySelectorAll("input, select, textarea, button"),s="data-origin-disabled",n="data-qube-disabled",o=0;o<i.length;o++){var a=i[o];e?a.disabled&&!a.hasAttribute(n)?a.setAttribute(s,1):(a.disabled=!0,a.setAttribute(n,1)):a.hasAttribute(s)?(a.removeAttribute(s),a.disabled=!0):a.hasAttribute(n)&&(a.disabled=!1,a.removeAttribute(n))}};this.explode=function(t,e,i,s){null==t&&(t=500),null==e&&(e="ease-out"),null==s&&(s=!0);var n="opacity:0.0;";s||(n="");var o=(null==i?this.sizePx/4:i)+this.sizePx/2,s=document.getElementById(this.id);if(null!=s){var a=this;this.stopSwipe=!0,handleUnpresentFaces(s,null);var i=this.sizePx/2,r=this.id,n="@keyframes explodeQubeFront_"+r+"{ from{ transform: rotateY(0deg) translateZ("+i+"px); } to{ transform: rotateY(0deg) translateZ("+o+"px); "+n+" }}@keyframes explodeQubeBack_"+r+"{ from{ transform: rotateY(180deg) translateZ("+i+"px); } to{ transform: rotateY(180deg) translateZ("+o+"px); "+n+" }}@keyframes explodeQubeTop_"+r+"{ from{ transform: rotateX(90deg) translateZ("+i+"px); } to{ transform: rotateX(90deg) translateZ("+o+"px); "+n+" }}@keyframes explodeQubeBottom_"+r+"{ from{ transform: rotateX(-90deg) translateZ("+i+"px); } to{ transform: rotateX(-90deg) translateZ("+o+"px); "+n+" }}@keyframes explodeQubeLeft_"+r+"{ from{ transform: rotateY(-90deg) translateZ("+i+"px); } to{ transform: rotateY(-90deg) translateZ("+o+"px); "+n+" }}@keyframes explodeQubeRight_"+r+"{ from{ transform: rotateY(90deg) translateZ("+i+"px); } to{ transform: rotateY(90deg) translateZ("+o+"px); "+n+" }}";this.addHeadCss(n);for(var l,c,p,u=s.getElementsByClassName("qube-face"),h=u.length,d=["explodeQubeFront","explodeQubeBack","explodeQubeTop","explodeQubeBottom","explodeQubeLeft","explodeQubeRight"],f=0;f<h;f++)c=(l=u[f]).getAttribute("style"),p="animation: "+d[f]+"_"+r+" "+t/1e3+"s "+e+" 0.0s normal forwards;",p+="pointer-events:none;",l.setAttribute("style",c+" "+p);setTimeout(function(){a.remove()},t)}},this.initInfiniteAnimation=function(t,e){var i,s=document.getElementById(this.id);null!=s&&(i=this.sizePx/2*-1,i="@keyframes spinQubeX_"+this.id+"{ from{ transform: translateZ("+i+"px) rotateX(0deg); } to{ transform: translateZ("+i+"px) rotateX(360deg); }}NaN"+this.id+"{ from{ transform: translateZ("+i+"px) rotateY(0deg); } to{ transform: translateZ("+i+"px) rotateY(360deg); }}@keyframes spinQubeXN_"+this.id+"{ from{ transform: translateZ("+i+"px) rotateX(360deg); } to{ transform: translateZ("+i+"px) rotateX(0deg); }}@keyframes spinQubeYN_"+this.id+"{ from{ transform: translateZ("+i+"px) rotateY(360deg); } to{ transform: translateZ("+i+"px) rotateY(0deg); }}",this.addHeadCss(i),i=s.getAttribute("style"),t="animation: "+e+"_"+this.id+" "+t+"s linear 0.0s normal infinite;",s.setAttribute("style",i+" "+t))},this.autoSpinX=function(t,e,i){null==e&&(e=!0),null==t&&(t=6),null==i&&(i=!0),autoSpinMode="X",ap1=e,ap2=t,ap3=i,this.initInfiniteAnimation(t,e?"spinQubeXN":"spinQubeX"),!i||null!=(i=document.getElementById(this.id).getElementsByClassName("qube-back")[0])&&(i.style.transform="translateZ("+this.sizePx/2*-1+"px) rotateY(180deg) rotateZ(180deg)")},this.autoSpinY=function(t,e){null==e&&(e=!0),null==t&&(t=6),autoSpinMode="Y",ap1=t,ap2=e,this.initInfiniteAnimation(t,e?"spinQubeYN":"spinQubeY")},this.getCurrentFace=function(){return currentFace},this.getId=function(){return this.id},this.enableSwipe=function(isSwipeVertical,isSwipeHorizontal,isGrabMouseCursor){null==isSwipeVertical&&(isSwipeVertical=!0),null==isSwipeHorizontal&&(isSwipeHorizontal=!0),null==isGrabMouseCursor&&(isGrabMouseCursor=!1);var qe=this,eleQube=document.getElementById(qe.getId()),xDown,yDown,xDownM,yDownM,stopMouseMove;function getTouches(t){return t.touches||t.originalEvent.touches}function handleTouchStart(t){qe.stopSwipe||(t=getTouches(t)[0],xDown=t.clientX,yDown=t.clientY)}function handleTouchMove(t){var e;!qe.stopSwipe&&xDown&&yDown&&(e=t.touches[0].clientX,t=t.touches[0].clientY,swipeMostSignificant(xDown-e,yDown-t),yDown=xDown=null)}function handleMouseDown(t){qe.stopSwipe||(xDownM=t.screenX,yDownM=t.screenY,stopMouseMove=!1)}function handleMouseMove(t){var e;!qe.stopSwipe&&!stopMouseMove&&xDownM&&yDownM&&(e=t.screenX,t=t.screenY,t=yDownM-t,(e=xDownM-e)<10&&t<10&&-10<e&&-10<t||(swipeMostSignificant(e,t),yDownM=xDownM=null))}function handleMouseUp(t){qe.stopSwipe||(stopMouseMove=!0)}function swipeMostSignificant(t,e){Math.abs(t)>Math.abs(e)?!qe.stopSwipeY&&isSwipeHorizontal&&(0<t?leftSwipe:rightSwipe)():!qe.stopSwipeX&&isSwipeVertical&&(0<e?upSwipe:downSwipe)()}function timeoutAct(t,e){""!==t&&setTimeout(t,1e3*e)}function leftSwipe(){var cf;qe.stopSwipeLeft||(""!==onSwipeLeftAct&&eval(onSwipeLeftAct),cf=qe.getCurrentFace(),"front"===cf?qe.spinToRight():"right"===cf?qe.spinToBack():"back"===cf?qe.spinToLeft():"left"===cf?qe.spinToFront():"top"!==cf&&"bottom"!==cf||qe.spinToRight(),timeoutAct(afterSwipeLeftAct,spinAnimationSeconds))}function rightSwipe(){var cf;qe.stopSwipeRight||(""!==onSwipeRightAct&&eval(onSwipeRightAct),cf=qe.getCurrentFace(),"front"===cf?qe.spinToLeft():"right"===cf?qe.spinToFront():"back"===cf?qe.spinToRight():"left"===cf?qe.spinToBack():"top"!==cf&&"bottom"!==cf||qe.spinToLeft(),timeoutAct(afterSwipeRightAct,spinAnimationSeconds))}function upSwipe(){var cf;qe.stopSwipeUp||(""!==onSwipeUpAct&&eval(onSwipeUpAct),cf=qe.getCurrentFace(),"front"===cf||"right"===cf||"back"===cf||"left"===cf?qe.spinToBottom():"top"===cf?qe.spinToFront():"bottom"===cf&&qe.spinToBack(),timeoutAct(afterSwipeUpAct,spinAnimationSeconds))}function downSwipe(){var cf;qe.stopSwipeDown||(""!==onSwipeDownAct&&eval(onSwipeDownAct),cf=qe.getCurrentFace(),"front"===cf||"right"===cf||"back"===cf||"left"===cf?qe.spinToTop():"top"===cf?qe.spinToBack():"bottom"===cf&&qe.spinToFront(),timeoutAct(afterSwipeDownAct,spinAnimationSeconds))}null!=eleQube&&(isGrabMouseCursor&&(eleQube.style.cursor="grab"),eleQube.addEventListener("touchstart",handleTouchStart,!1),eleQube.addEventListener("touchmove",handleTouchMove,!1),eleQube.addEventListener("mousedown",handleMouseDown,!1),eleQube.addEventListener("mousemove",handleMouseMove,!1),eleQube.addEventListener("mouseup",handleMouseUp,!1),eleQube.style.userSelect="none",xDown=null,yDown=null,xDownM=null,yDownM=null,stopMouseMove=!0)},this.recalibratePerspectiveOrigin=function(t){var e,i=document.getElementById(this.id);null!=i&&(0<=(i=(e=i.parentElement).style.perspectiveOrigin).indexOf(" ")&&(i=i.substring(0,i.indexOf(" "))),e.style.perspectiveOrigin=i+" "+t)},this.resetTransformPart=function(t,e,i,s,n){var o,a,r=t;null!=r&&(null==(o=e)&&(o="translateZ"),a=o+"(",e=(t=r.style.transform).indexOf(a),null!=n&&(r.style.transition=n),-1!=e?(n=t.indexOf(")",e)+1,n=t.substring(e,n),a=a+i+")",t=t.replace(n,a),r.style.transform=t):s&&(r.style.transform=t+" "+o+"("+i+")"))},this.resize=function(t){var e=t/2,i=t+"px";this.sizePx=t;var s,n,o=document.getElementById(this.id),a=["front","back","right","left","top","bottom"];for(this.recalibratePerspectiveOrigin(e+"px"),this.resetTransformPart(o,"translateZ","-"+e+"px",!1,""),o.style.width=i,o.style.transformOrigin="50% "+e+"px",s=0;s<6;s++)n=o.getElementsByClassName("qube-"+a[s])[0],this.resetTransformPart(n,"translateZ",e+"px",!1,null),n.style.width=i,n.style.height=i;null!=autoSpinMode&&("Y"===autoSpinMode?this.autoSpinY(ap1,ap2):"X"===autoSpinMode&&this.autoSpinX(ap1,ap2,ap3))}}